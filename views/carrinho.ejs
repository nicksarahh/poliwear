<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/carrinho.css">
    <!-- fontes utilizadas -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="/imagens/wear.ico" type="image/x-icon">
    <!-- cdn dos icones utilizados no site -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <title>Poli Wear | Carrinho</title>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>

</head>
<body>
    <header>
        <a href="/telainicial.html" class="logo"><img src="/imagens/logo.png" width="220px"></a>

        <div class="icon">
            <a href="/perfil.html"><i class="bi bi-person" id="perfil"></i></a>
            <a href="/carrinho"><i class="bi bi-cart3" id="carrinho"></i></a>
        </div>
    </header>
    <main>
        <div class="label">
            <label class="lbl_carrinho">Carrinho</label>
        </div>
        <% if (itens.length >= 1) { %>
        <div class="produtos">
            <table id="produtos">
                <tbody>
                    <% itens.forEach(function(item) { %>
                        <tr id="itens">
                            <td class="produto">
                                <img src="<%= item.imagem %>" class="imgCamiseta">
                                <div class="infoProduto">
                                    <div id="info">
                                        <div class="titulo"><%= item.titulo %></div>
                                        <div class="tamanho"><%= item.tamanho %></div>
                                        <div class="cor">Cor: <%= item.cor %></div>                            
                                        <div class="quantidade"><%= item.quantidade %>x</div>
                                    </div>
                                    <div id="preco">
                                        <div class="preco" style="font-weight: 700;">R$ <%= parseFloat(item.preco).toFixed(2) %></div>
                                    </div>
                                </div>
                            </td>
                            
                          <form action="/remover-produto" method="post">
                                <input type="hidden" name="produto_id" value="<%= item.id %>">
                                <td><button type="submit" class="excluir"><ion-icon name="close-outline"></ion-icon></button></td>
                            </form>
                        </tr>
                        
                    <% }) %>
                    <tr>
                        <td id="total" colspan="5">Total R$<%= total %></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="btns">
            <button type="button" id="continuar" onclick="window.location.href='/telainicial.html#camisetas'">
                <img src="/imagens/seta.png" class="seta">
                <label class="lbl_continuar">Continuar Comprando</label>
            </button>      
            <form action="/concluirPedido" method="POST">
                <button type="submit" class="concluir">Concluir Pedido</button>
            </form>
        </div>
    <% } %>

    <% if (itens.length === 0) { %>
        <div class="carrinho-vazio">
            <p class="lbl_carrinhoVazio">Seu carrinho est√° vazio.</p>
            <img src="/imagens/carrinho.png" alt="Carrinho Vazio" class="carrinho_img">
            <button class="continuar_comprando" onclick="window.location.href='/telainicial.html#camisetas'">Continuar Comprando</button>            
        </div>
    <% } %>
    </main>
    <footer></footer>
</body>
</html>
